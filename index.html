<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lambda Functions Interaction xxx</title>
<script>
// Fetch selection data from the first Lambda function on page load
window.onload = function() {
  fetch('https://pu14ug6ii9.execute-api.us-east-2.amazonaws.com/default/digixp_231030_x')
    .then(response => response.json())
    .then(data => {
      // Assuming the data is an array of arrays for the selection options
      const selections = document.querySelectorAll('.selection');
      selections.forEach((selectElement, index) => {
        data[index].forEach(optionValue => {
          let option = new Option(optionValue, optionValue);
          selectElement.add(option);
        });
      });
    });
};

// Function to call the second Lambda function with the selected values
function combineSelections() {
  const selections = Array.from(document.querySelectorAll('.selection'))
    .map(select => select.value);
  
  fetch('https://g6a6uagj29.execute-api.us-east-2.amazonaws.com/default/digixp_231030_x_1', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ selections: selections }),
  })
  .then(response => response.json())
  .then(data => {
    // Display the result
    document.getElementById('result').textContent = data.result;
  });
}
</script>
</head>
<body>
  <h1>Selection Menu</h1>
  
  <!-- Selection Menus -->
  <div id="selection-menus">
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
    <select class="selection"></select>
  </div>
  
  <!-- Submit Button -->
  <button onclick="combineSelections()">Combine Selections</button>
  
  <!-- Result Display -->
  <div id="result"></div>
</body>
</html>



